@if (isModalOpen) {
<app-modal (close)="closeModal()">
  <div modal-header>
    <h2>Wybierz Świat Gry</h2>
  </div>

  <div modal-body>
    <p>Aby kontynuować, wybierz serwer, na którym chcesz grać.</p>
    <select class="server-select" [(ngModel)]="selectedServerInModal">
      <option *ngFor="let server of servers" [value]="server.id">
        {{ server.name }}
      </option>
    </select>
  </div>

  <div modal-footer class="footer-buttons">
    <button class="btn btn-secondary" (click)="closeModal()">Anuluj</button>
    <button class="btn btn-primary" (click)="joinGame()">Dołącz do Gry</button>
  </div>
</app-modal>
} @if (joinedServerId) {
<div class="game-container">
  <header class="top-bar">
    <div class="logo">
      <h2>Plemiona</h2>
    </div>
    <div class="resources">
      <span>Drewno: {{ resources.wood }}</span>
      <span>Glina: {{ resources.clay }}</span>
      <span>Żelazo: {{ resources.iron }}</span>
      <span
        >Ludność: {{ resources.population }}/{{ resources.maxPopulation }}</span
      >
    </div>
    <div class="server-info">
      Serwer: <strong>{{ joinedServerId }}</strong>
    </div>
  </header>

  <main class="main-content">
    <nav class="side-menu">
      <ul>
        <li [class.active]="activeTab === 'village'">
          <a routerLink="village">Wioska</a>
        </li>
        <li [class.active]="activeTab === 'map'">
          <a routerLink="map">Mapa</a>
        </li>
        <li [class.active]="activeTab === 'barracks'">
          <a routerLink="barracks">Koszary</a>
        </li>
        <li [class.active]="activeTab === 'chat'">
          <a routerLink="chat">Wiadomości</a>
        </li>
        <li [class.active]="activeTab === 'ranking'">
          <a routerLink="ranking">Ranking</a>
        </li>
      </ul>
    </nav>

    <div class="game-world">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>
} @if (!isModalOpen && !joinedServerId) {
<div class="info-message">
  <p>
    Musisz wybrać serwer, aby rozpocząć grę. Odśwież stronę, aby spróbować
    ponownie.
  </p>
</div>
}

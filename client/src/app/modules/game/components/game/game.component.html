@if (isModalOpen) {
<app-modal (close)="closeModal()">
  <div modal-header>
    <h2>{{ "game.modal.HEADER" | translate }}</h2>
  </div>

  <div modal-body>
    <p>{{ "game.modal.BODY_TEXT" | translate }}</p>
    <select class="server-select" [(ngModel)]="selectedServerInModal">
      <option *ngFor="let server of servers" [ngValue]="server">
        {{ server.name }} - ({{ server.hostname }}:{{ server.port }})
      </option>
    </select>
  </div>

  <div modal-footer class="footer-buttons">
    <button class="btn btn-secondary" (click)="closeModal()">
      {{ "game.modal.BTN_CANCEL" | translate }}
    </button>
    <button class="btn btn-primary" (click)="joinGame()">
      {{ "game.modal.BTN_JOIN" | translate }}
    </button>
  </div>
</app-modal>
} @if (joinedServer && !connectionFailed) {
<div class="game-container">
  <header class="top-bar">
    <div class="logo">
      <h2>{{ "game.TITLE" | translate }}</h2>
      <img
        src="/assets/icons/home.png"
        alt=""
        style="width: 30px; height: 30px"
      />
    </div>
    <div class="resources">
      <span [title]="('resources.wood' | translate) + ': ' + resources.wood">
        <img
          src="/assets/icons/wood.png"
          alt="Wood icon"
          style="width: 24px; height: 24px"
        />
        {{ resources.wood | adjustResourceQuantity }}</span
      >
      <span [title]="('resources.clay' | translate) + ': ' + resources.clay">
        <img
          src="/assets/icons/clay.png"
          alt="Clay icon"
          style="width: 24px; height: 24px"
        />
        {{ resources.clay | adjustResourceQuantity }}</span
      >
      <span [title]="('resources.iron' | translate) + ': ' + resources.iron">
        <img
          src="/assets/icons/iron.png"
          alt="Iron icon"
          style="width: 24px; height: 24px"
        />
        {{ resources.iron | adjustResourceQuantity }}</span
      >
      <span [title]="'resources.population' | translate">
        <img
          src="/assets/icons/villager.png"
          alt="Villager icon"
          style="width: 24px; height: 24px"
        />
        {{ resources.population }}/{{ resources.maxPopulation }}</span
      >
    </div>
    <div class="server-info">
      {{ "game.topbar.SERVER_LABEL" | translate }}:
      <strong>{{ joinedServer.name }}</strong>
    </div>
  </header>

  <main class="main-content">
    <app-side-menu [activeTab]="activeTab"></app-side-menu>
    <div
      class="game-world"
      [ngStyle]="{ padding: router.url.includes('profile') ? '0' : null }"
    >
      <router-outlet></router-outlet>
    </div>
  </main>
</div>
} @if (!isModalOpen && !joinedServer) {
<div class="info-message">
  <p>{{ "game.info.SELECT_SERVER" | translate }}</p>
</div>
} @if (connectionFailed) {
<div class="error-message">
  <p>{{ "game.errors.CONNECTION_FAILED" | translate }}</p>
</div>
}

@if (isVisible) {
<div class="modal-overlay" (click)="closeModal()">
  <div class="modal-panel" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ "editModal.HEADER_EDIT" | translate }}</h3>
      <button
        class="icon-btn"
        (click)="closeModal()"
        [attr.aria-label]="'editModal.ARIA_CLOSE' | translate"
      >
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <div class="modal-content">
      @for (col of formColumns; track col.key) {
      <div class="form-group">
        <!-- Tłumaczenie nagłówka kolumny -->
        <label [for]="col.key">{{ col.header | translate }}</label>

        @if (col.type === 'checkbox' || isBooleanField(col.key)) {
        <div class="checkbox-wrapper">
          <input
            type="checkbox"
            class="styled-checkbox"
            [id]="col.key"
            [(ngModel)]="editableItem[col.key]"
          />
        </div>
        } @else if (col.type === 'select') {
        <select
          [id]="col.key"
          [ngModel]="getValue(col)"
          (ngModelChange)="updateValue(col, $event)"
          [disabled]="col?.isReadOnly ?? false"
          class="form-control"
        >
          @for (opt of col.options; track opt.value) {
          <option [value]="opt.value">{{ opt.label | translate }}</option>
          }
        </select>
        } @else {
        <input
          type="text"
          [id]="col.key"
          [ngModel]="getValue(col)"
          (ngModelChange)="updateValue(col, $event)"
          [disabled]="col.isReadOnly ?? false"
          class="form-control"
        />
        }
      </div>
      }
    </div>

    <div class="modal-footer">
      <button class="btn btn-danger" (click)="deleteItem()">
        {{ "editModal.BTN_DELETE" | translate }}
      </button>
      <div class="actions-right">
        <button class="btn btn-secondary" (click)="closeModal()">
          {{ "editModal.BTN_CANCEL" | translate }}
        </button>
        <button class="btn btn-primary" (click)="saveChanges()">
          {{ "editModal.BTN_SAVE" | translate }}
        </button>
      </div>
    </div>
  </div>
</div>
}
